<div class="center-div">
  <mat-spinner 
  [color]="color" 
  [mode]="mode" 
  [diameter]="diameter" 
  *ngIf="isLoading">
  </mat-spinner>
</div>
<div class="container" style="height:auto;" *ngIf="!isLoading">
  <div class="row">
    <div class="col-md-12">
      <h1 >Actualit√©s</h1>
        <div style="height:80px;">
          </div>
          <div *ngFor="let actu of actus | orderBy">
            <h2 style="font-weight:bold;">{{ actu.title }}</h2>
            <div [innerHTML]="actu.content | html "></div>
            <hr>
            <ng-template #users><p *ngFor="let lovedBy of actu.lovedBy">{{ lovedBy.username}}</p></ng-template>
            <button mat-button ngbTooltip="Aimer cette publication" *ngIf="!actu.liked" (click)="setLike(this.actu)"><mat-icon>thumb_up</mat-icon> J'aime</button>
            <button mat-button ngbTooltip="Ne plus aimer cette publication" *ngIf="actu.liked" (click)="setDislike(this.actu)"><mat-icon>thumb_down</mat-icon> Je n'aime plus</button>
            <button mat-button ngbTooltip="Commenter cette publication" (click)="toggleCommentBox(actu)"><mat-icon>message</mat-icon> Commenter</button>
            <mat-icon *ngIf="!actu.liked">favorite_border</mat-icon>
            <mat-icon class="heart" *ngIf="actu.liked">favorite</mat-icon>
            <small *ngIf="actu.lovedBy.length > 0" placement="top" [ngbTooltip]="users" class="likeNumber">
                {{ actu.lovedBy.length }}
              </small> 
              <hr>
            <div class="container mb-3">
              <div class="row mb-2" style="min-height:80px;height:auto;border:1px solid beige;padding:5px;background:blanchedalmond;" *ngFor="let commentari of actu.commentaries">
                <img style="border-radius:50%;width:30px;height:30px;" src="http://admin.fenrir-studio.fr/{{ commentari.user.profilePicture.imgPath}}"/> <span style="font-weight: bold;">{{ commentari.user.username }}</span><br>
                <div class="col-md-12">
                  {{ commentari.content }}
                  <div *ngIf="commentari.canDelete == true" style="display:flex;flex-direction: row-reverse;align-items: flex-end;">
                    <button class='btn btn-danger' (click)="deleteComment(commentari)"><mat-icon>delete</mat-icon></button>
                  </div>
                </div>
              </div>
              <form *ngIf="actu.boxComment" [formGroup]="commentForm">
              <textarea  class='form-control' id="comment" formControlName="commentary" placeholder="Publiez quelque chose"></textarea>
              <div class="container mb-5">
                <button class="btn btn-success mt-1" (click)="publishComment(actu)" style="float: right;">Publier</button>
              </div>
                </form>
            </div>  
            <hr style="background:black;">
      </div>
    </div>